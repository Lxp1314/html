<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>CESC-合同查询</title>

		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/bootstrap-table.css">
		<link rel="stylesheet" href="css/main.css" />
		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/bootstrap-table.js"></script>
		<script src="js/bootstrap-table-zh-CN.js"></script>
		<script src="js/common.js"></script>
		<style type="text/css">
			.tooltip-inner {
				background-color: #D9534F;
				text-align: left;
			}
			ul.timeline {
				list-style-type: none;
				background: url("image/time-line.png") repeat-y scroll 50px 0px transparent;
				padding: 0;
				margin: 10px;
			}
			
			ul.timeline li {
				position: relative;
				margin-bottom: 20px;
			}
			
			ul.timeline li .time {
				position: absolute;
				width: 66px;
				background-color: #428bca;
				color: white;
				text-align: center;
				font-size: 75%;
				font-weight: 700;
				padding: 3px 5px;
				border-radius: 5px;
				left: 15px;
			}
			
			ul.timeline li .time-content {
				margin-left: 95px;
				padding: 0px 10px;
			}
		</style>
	</head>

	<body>
		<div id="container">
			<nav id="column-left">
				<div style="width: 130px; height: 130px; margin: 40px 35px; border-radius: 50% 50%; background-color: white; text-align: center;">
					<img src="image/logo_blue.png" style=" width: 60%; margin-top: 25%;" />
				</div>
				<h3 class="text-center" style="margin-bottom: 30px; padding: 0px 8px; line-height: 1.2em;">北京拜克洛克科技有限公司</h3>
				<div class="list-group">
					<a href="#" class="list-group-item">
						<span class="badge badge2">&gt;</span> 订单查询
					</a>
					<div class="list-group list-group-child">
						<a href="main.html" class="list-group-item active"><span class="badge badge2">&gt;</span>在线订单</a>
						<a href="main.html?state=1" class="list-group-item"><span class="badge badge2">&gt;</span>完成订单</a>
					</div>
					<a href="order.html" class="list-group-item"><span class="badge badge2">&gt;</span>在线下单</a>
					<a href="quality.html" class="list-group-item"><span class="badge badge2">&gt;</span><span class="badge badge-danger">2</span>质量信息</a>
					<a href="service2.html" class="list-group-item"><span class="badge badge2">&gt;</span>智能客服</a>
					<a href="service.html" class="list-group-item"><span class="badge badge2">&gt;</span>售前咨询</a>
					<a href="chat.html" class="list-group-item"><span class="badge badge2">&gt;</span>行业交流</a>
				</div>
			</nav>
			<div id="content">
				<div class="visible-xs" style="height: 48px; background-color: #1757b9; position: relative;">
					<div style="position: absolute; width: 36px; height: 36px; left: 6px; top: 6px; background-color: white; border-radius: 50% 50%; text-align: center;">
						<img src="image/logo_blue.png" style="height: 24px; margin-top: 6px;" />
					</div>
					<div style="position: absolute; width: 36px;height: 36px; right: 6px; top: 6px; background-color: ;">
						<button type="button" class="btn-menu" id="btn-menu">
					            <span class="sr-only">Toggle navigation</span>
					            <span class="icon-bar"></span>
					            <span class="icon-bar"></span>
					            <span class="icon-bar"></span>
					          </button>
					</div>
				</div>
				<div class="container-fluid">
					<!--<div class="page-header">
					  <p style="font-size: 30px;">订单查询</p>
					</div>-->

					<div class="page-header hidden-xs">
						<ol class="breadcrumb">
							<li>当前位置：</li>
							<li>
								<a href="#">首页</a>
							</li>
							<li>
								<a href="#">订单查询</a>
							</li>
							<li>
								<a href="#" id="cur_menu">在线订单</a>
							</li>
						</ol>
					</div>

					<div id="toolbar">
						<div class="form-inline" role="form">
							<div class="form-group">
								<input name="search" class="form-control" type="text" placeholder="合同编号">
							</div>
							<div class="form-group">
								<input name="search" class="form-control" type="text" placeholder="合同名称">
							</div>
							<div class="form-group hidden-xs">
								<select class="form-control">
									<option>合同类型</option>
									<option>组合订单</option>
									<option>减划</option>
									<option>模块</option>
									<option>卡</option>
									<option>CSP卡</option>
									<option>CSP模块</option>
									<option>COB</option>
									<option>其它</option>
								</select>
							</div>
							<div class="form-group hidden-xs">
								<select class="form-control">
									<option>生产类型</option>
									<option>工程</option>
									<option>量产</option>
								</select>
							</div>
							<!--<div class="form-group hidden-xs">
								<div class="checkbox">
									<label>
							          <input type="checkbox">已支付
							        </label>
								</div>
							</div>-->
							<button id="ok" type="submit" class="btn btn-default hidden-xs">查询</button>
						</div>
					</div>
					<table id="table" data-toolbar="#toolbar" data-show-columns="true" data-height="766" data-show-refresh="true" data-show-toggle="true" data-detail-view="true" data-detail-formatter="detailFormatter" data-pagination="true" data-page-size="15" data-page-list="[5,10,15,20,50]" data-pagination-first-text="首页" data-pagination-pre-text="上一页" data-pagination-next-text="下一页" data-pagination-last-text="尾页">
						<thead>
							<tr>
								<th data-field="id" data-sortable="true" data-switchable="false">合同编号</th>
								<th data-field="name" data-switchable="false">合同名称</th>
								<th data-field="type" data-sortable="true" data-switchable="false">合同类型</th>
								<th data-field="type_production" data-sortable="true" data-switchable="false">生产类型</th>
								<th data-field="price" data-sortable="true">合同价格</th>
								<th data-field="state" data-formatter="stateFormatter" data-sortable="true">合同状态</th>
								<th data-field="time" data-sortable="true">合同时间</th>
								<th data-field="pay_state" data-sortable="true" data-visible="false">支付状态</th>
								<!--<th data-field="file" data-formatter="operateFormatter">操作</th>-->
							</tr>
						</thead>
					</table>
				</div>
			</div>
		</div>
		<script>
			var $table = $('#table');
			var state = get('state');
			var typeArr = ['组合订单', '减划', '模块', '卡', 'CSP卡', 'CSP模块', 'COB', '其它'];
			var typeProduction = ['工程', '量产'];
			var stateArr = ['待生产', '生产中', '待结款', '已完成'];
			var nameArr = ['智能GPS定位芯片合同', '智能感应声音控制模块合同'];
			var rows = 100;

			$(function() {
				if(state != null){
					$("#cur_menu").text('完成订单');
				}
				var data = [];
				for(var i = 0; i < rows; i++) {
					var id = '000000' + i;
					var random = parseInt(Math.random() * rows);
					//					console.log(random);
					data[i] = {
						"id": "ISB20170216" + id.substring(id.length - 3),
						"name": i < 10 ? nameArr[0] : nameArr[1],
						"type": typeArr[random % typeArr.length],
						"type_production": i < 10 ? typeProduction[0] : typeProduction[1],
						"price": "2000 000 000",
						"state": state != null ? stateArr[stateArr.length - 1] : stateArr[random % (stateArr.length - 1)],
						"time": i < 10 ? "2017-10-17" : "2017-10-10",
						"pay_state": "已支付",
						//						"file": 'a.txt'
					};
				}

				var is_mobile = $(window).width() < 768 ? true : false;
				$table.bootstrapTable({
					data: data,
					cardView: is_mobile,
					showToggle: !is_mobile,
					pageList: is_mobile ? [] : [5, 10, 15, 20, 50],
					onExpandRow: function(index, row) {
						$('[data-toggle="tooltip"]').tooltip({
							html: true
						});
					}
				});

				$("#btn-menu").on('click', function() {
					if($("#column-left").css('margin-left') == "-200px") {
						$("#column-left").css('margin-left', '0px');
					} else {
						$("#column-left").css('margin-left', '-200px');
					}
				});

			});

			function operateFormatter(value, row) {
				if(value.length > 0) {
					return '<button class="btn btn-xs btn-danger">上传</button> <button class="btn btn-xs btn-primary">下载</button>';
				} else {
					return '<button class="btn btn-xs btn-danger">上传</button>';
				}
				//      var icon = row.id % 2 === 0 ? 'glyphicon-star' : 'glyphicon-star-empty'
				//
				//      return '<i class="glyphicon ' + icon + '"></i> ' + value;
			}

			function stateFormatter(value, row) {
				if(value == stateArr[0]) {
					return '<span class="label label-info">' + value + '</span>';
				} else if(value == stateArr[1]) {
					return '<span class="label label-success">' + value + '</span>';
				} else if(value == stateArr[2]) {
					return '<span class="label label-danger">' + value + '</span>';
				} else if(value == stateArr[3]) {
					return '<span class="label label-primary">' + value + '</span>';
				}
			}

			function detailFormatter(index, row) {
				//		        var html = [];
				//		        $.each(row, function (key, value) {
				//		            html.push('<p><b>' + key + ':</b> ' + value + '</p>');
				//		        });
				//		        return html.join('');
				var html = '';
				//				html += '<div class="container">';
				html += '<div style="padding:0px 20px 20px;">';
				html += '<div class="row">';
				html += '<div class="col-sm-10"><h3>合同详情</h3></div>';
				html += '<div class="col-sm-2"><button class="btn btn-danger btn-sm" type="button" style="margin-top:20px;">发起质量反馈</button></div>';
				html += '</div>';
				html += '<hr style="border: none; border-top: dashed 1px #dddddd;">';
				html += '<div class="row">' +
					'<div class="col-sm-2 text-right"><h5>合同名称：</h5></div>' +
					'<div class="col-sm-2"><h5>' + row.name + '</h5></div>' +
					'<div class="col-sm-2 text-right"><h5>合同编号：</h5></div>' +
					'<div class="col-sm-2"><h5>' + row.id + '</h5></div>' +
					'<div class="col-sm-2 text-right"><h5>合同类型：</h5></div>' +
					'<div class="col-sm-2"><h5>' + row.type + '</h5></div>' +
					'<div class="col-sm-2 text-right"><h5>生产类型：</h5></div>' +
					'<div class="col-sm-2"><h5>' + row.type_production + '</h5></div>' +
					'<div class="col-sm-2 text-right"><h5>计划完成时间：</h5></div>' +
					'<div class="col-sm-2"><h5>2017-10-01</h5></div>' +
					'<div class="col-sm-2 text-right"><h5>合同完成时间：</h5></div>' +
					'<div class="col-sm-2"><h5>2017-10-17</h5></div>' +
					'<div class="col-sm-2 text-right"><h5>合同价格：</h5></div>' +
					'<div class="col-sm-2"><h5>' + row.price + '</h5></div>' +
					'<div class="col-sm-2 text-right"><h5>合同状态：</h5></div>' +
					'<div class="col-sm-2"><h5>' + stateFormatter(row.state, row) + '</h5></div>' +
					'<div class="col-sm-2 text-right"><h5>质量反馈：</h5></div>' +
					'<div class="col-sm-2"><h5>' + (index > 0 ? '无' : '<a href="#" style="text-decoration:none;" class="text-muted">有 <span class="badge" style="background-color:#d9534f;">2</span></a>') + '</h5></div>' +
					'</div>';
				html += '<hr style="border: none; border-top: dashed 1px #dddddd;">';
				html += '<div class="row text-center">' +
					'<div class="col-sm-3">' +
					'<h5>订单总数量</h5>' +
					'<h3 style="color: #1757b9; font-weight: bold;">1, 000, 000</h3>' +
					'</div>' +
					'<div class="col-sm-3">' +
					'<h5>已完成数量</h5>' +
					'<h3 style="color: #5cb85c; font-weight: bold;">350, 000</h3>' +
					'</div>' +
					'<div class="col-sm-3">' +
					'<h5>已投产数量</h5>' +
					'<h3 style="color: #f0ad4e; font-weight: bold;">550, 000</h3>' +
					'</div>' +
					'<div class="col-sm-3">' +
					'<h5>待投产数量</h5>' +
					'<h3 style="color: #d9534f; font-weight: bold;">450, 000</h3>' +
					'</div>' +
					'</div>';
				//				html += '<div class="progress">' +
				//						  '<div class="progress-bar progress-bar-success" style="width: 35%">' +
				//						    '<span class="sr-only">35% Complete (success)</span>' +
				//						  '</div>' +
				//						  '<div class="progress-bar progress-bar-warning" style="width: 20%">' +
				//						    '<span class="sr-only">20% Complete (warning)</span>' +
				//						  '</div>' +
				//						  '<div class="progress-bar progress-bar-danger" style="width: 45%">' +
				//						    '<span class="sr-only">10% Complete (danger)</span>' +
				//						  '</div>' +
				//						'</div>';
				html += '<div class="progress">' +
					'<div class="progress-bar progress-bar-success" style="width: 35%">' +
					'已完成：35%' +
					'</div>' +
					'<div class="progress-bar progress-bar-warning" style="width: 20%">' +
					'已投产：55%' +
					'</div>' +
					'<div class="progress-bar progress-bar-danger" style="width: 45%"  data-toggle="tooltip" data-placement="top" title="待投产原因：<br>1.物料不齐全<br>2.排期<br>3.其它（可编辑）">' +
					'待投产：45%' +
					'</div>' +
					'</div>';
				html += '<p class="bg-info" style="padding:15px;"><strong>合同备注:</strong><br>1.2017-10-17 19:02:47 由于受十九大会议召开影响，所有工厂暂停生产，合同需要延期！<br>2.2015-10-11 12:02:59 客户提交合同</p>';
				html += '<hr style="border: none; border-top: dashed 1px #dddddd;">';

				html += '<h4>交货计划</h4>';

				html += '<table class="table table-bordered" style="background-color:transparent;">';
				//				html += '  <tr>';
				//				html += '    <th colspan="7" style="text-align:center;">交货计划</th>';
				//				html += '  </tr>';
				html += '  <tr>';
				html += '    <th>产品名称</th>';
				html += '    <th>模块类别</th>';
				html += '    <th>交货时间</th>';
				html += '    <th>交货数量</th>';
				html += '    <th>状态</th>';
				html += '    <th>物流信息</th>';
				html += '    <th>备注</th>';

				html += '  </tr>';
				html += '  <tr>';
				html += '    <td>单车GPS定位芯片</td>';
				html += '    <td>芯片</td>';
				html += '    <td>2017-12-01</td>';
				html += '    <td>2 000</td>';
				html += '    <td>已完成</td>';
				html += '    <td><a>查询</a></td>';
				html += '    <td></td>';
				html += '  </tr>';
				html += '  <tr>';
				html += '    <td>单车GPS定位芯片</td>';
				html += '    <td>芯片</td>';
				html += '    <td>2018-01-01</td>';
				html += '    <td>2 000</td>';
				html += '    <td>已投产</td>';
				html += '    <td></td>';
				html += '    <td></td>';
				html += '  </tr>';
				html += '  <tr>';
				html += '    <td>单车GPS定位芯片</td>';
				html += '    <td>芯片</td>';
				html += '    <td>2018-03-01</td>';
				html += '    <td>3 000</td>';
				html += '    <td>待投产</td>';
				html += '    <td></td>';
				html += '    <td></td>';
				html += '  </tr>';
				html += '  <tr>';
				html += '    <td>单车GPS定位芯片</td>';
				html += '    <td>芯片</td>';
				html += '    <td>2018-05-01</td>';
				html += '    <td>4 000</td>';
				html += '    <td>待投产</td>';
				html += '    <td></td>';
				html += '    <td></td>';
				html += '  </tr>';
				html += '</table>';
				html += '<p class="bg-warning" style="padding:15px; margin-top:20px;"><strong>物流信息:</strong><br>自主物流/顺丰快递 快递单号：198788776666 运输中/ <button class="btn btn-primary btn-xs">获取详情</button></p>';
				html += '<ul class="timeline">';
				html += '  <li>';
				html += '    <div class="time">2017-10-01</div>';
				html += '    <div class="time-content">货物打包</div>';
				html += '  </li>';
				html += '  <li>';
				html += '    <div class="time">2017-10-02</div>';
				html += '    <div class="time-content">已出库，运输中</div>';
				html += '  </li>';
				html += '  <li>';
				html += '    <div class="time">2017-10-08</div>';
				html += '    <div class="time-content">客户已收货</div>';
				html += '  </li>';
				html += '</ul>';
				
				//				html += '<h3>合同备注</h3>' ;
				//				html += '<hr style="border: none; border-top: dashed 1px #dddddd;">';
				//				html += '<p class="bg-info" style="padding:15px;"><strong>合同备注:</strong><br>1.2017-10-17 19:02:47 由于受十九大会议召开影响，所有工厂暂停生产，合同需要延期！<br>2.2015-10-11 12:02:59 客户提交合同</p>';
				//				
				html += '</div>';
				//				html += '</div>';
				return html;
			}
		</script>
	</body>

</html>